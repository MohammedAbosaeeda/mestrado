Implementação do HECOPS
Rafael Pereira Pires (rafaelpp@lisha.ufsc.br)

O HECOPS foi desenvolvido de forma que o mesmo código pudesse rodar num pc ou sobre o EPOS. 

No caso do pc, cada nodo roda em uma thread e a troca de mensagens é feita na memória. O código da implementação do "wrapper" para pc está na pasta "simulation". Nele, a evolução do algoritmo pode ser acompanhada pela aplicação gráfica, ligada durante a compilação (ver Makefile). O código da parte gráfica encontra-se na pasta graphic.

Para se compilar no EPOS, uma macro _EPOS_ deve ser definida em hecops.cc.
Os únicos arquivos necessários para compilar o HECOPS no EPOS são: hecops.cc localiza.h e util.h.

hecops.cc
=========
Neste arquivo são definidas as funções anchor e mobile que, no caso do pc,
são executadas como uma thread e, no EPOS, uma delas deve ser chamada na main.
O código contém comentários a respeito da implementação. Mais detalhes sobre o algoritmo, ver artigo do Ricardo: http://www.lisha.ufsc.br/~guto/publications/mswim2006.pdf

localiza.h
==========
Aqui são definidas as classes Node, NodeList e Message.
Uma mensagem é composta das informações sobre um nodo (Node), origem, destino e rssi. Node contém informações sobre um nodo.
O arquivo ainda contém a implementação do método de cálculo das coordenadas baseado nas coordenas dos landmarks.

util.h
======
Neste arquivo são definidas algumas funções úteis (raiz quadrada, max, min, printf, etc.)

***** WRAPPER *****
wrapper.h
=========
Implementa as funções que emulam o Display (que no EPOS seria a saída serial) e NIC (com send e receive em buffers de memória).

hecops_wrapper.cc
=================
Implementa a main e funções wrappers com a assinatura void *f(void*) para executarem como thread, chamando as funções anchor ou mobile em hecops.cc.

read_data.cc
============
Lê os dados colhidos (armazenados em arquivos na pasta data/).

*** OBS.: O valor do RSSI deve ser colocado no campo _rssi de cada mensagem. (alterar arquivo $EPOS/include/mach/avr_common/cmac.h. Na pasta xxx encontra-se a versão do arquivo utilizada até então.

