\documentclass[12pt]{article}

\usepackage{sbc-template}

\usepackage{graphicx,url}

%\usepackage[brazil]{babel}   
\usepackage[latin1]{inputenc}  

     
\sloppy

\title{Ajuste Dinâmico de Potência de Transmissão em Redes de Sensores Sem Fio}

\author{Peterson Oliveira\inst{1}, Arliones Holler Jr.\inst{2}, Alexandre Massayuki Okazaki\inst{1}, Antônio Augusto Medeiros Fröhlich\inst{3} }


\address{Laboratório de Integração de Software e Hardware - Universidade Federal de Santa Catarina (UFSC)\\
  Caixa Postal 476, Florianópolis, SC, 88049-900 Brasil
\nextinstitute
  Departamento de Sistemas e Computação\\
  Universidade Federal de Santa Catarina (UFSC) -- Florian´opolis, SC -- Brazil
  \email{\{peterson,alexandre,guto\}@inf.ufsc.br, arliones@das.ufsc.br}
}

\begin{document} 

\maketitle

\begin{abstract}
  This meta-paper describes the style to be used in articles and short papers
  for SBC conferences. For papers in English, you should add just an abstract
  while for the papers in Portuguese, we also ask for an abstract in
  Portuguese (``resumo''). In both cases, abstracts should not have more than
  10 lines and must be in the first page of the paper.
\end{abstract}
     
\begin{resumo} 
  Redes de Sensores sem Fio (RSSFs) são constituídas por pequenos nodos que possuem capacidade sensorial, computacional e de comunicação sem fio.
Estes nodos sensores normalmente utilizam fontes de energia limitadas.
Um dos principais fatores no consumo de energia nas RSSFs é a transmissão de dados por rádio frequência.
Portanto, uma comunicação eficiente entre os dispositivos é necessária a fim de garantir um maior tempo de vida da rede.
Dado que um dos principais parâmetros que influenciam a energia consumida pelo dispositivo de transmissão de dados é a potência de transmissão, o objetivo deste trabalho é ajustar o valor correspondente à potência de transmissão para um valor mínimo ótimo que viabilize a comunicação entre os sensores de forma a utilizar o mínimo de energia possível.
Neste trabalho, apresentamos um método de seleção da potência de transmissão que utiliza o ADHOP, um protocolo de roteamento baseado em colônia de formigas.
Tal método utiliza a concentração de feromônio, utilizada na seleção da rota, como uma métrica na definição da potência de transmissão. Deste modo, cada nodo sensor define uma potência de transmissão adequada para cada rota em particular a fim de reduzir o desperdício de energia na rede.
As simulações foram realizadas no ambiente de simulação OMNeT++ utilizando a rede IEEE 802.15.4 em uma aplicação considerando tuma topologia dinâmica com nodos móveis.
Os resultados mostram que a abordagem utilizada reduz o consumo de energia dos dispositivos com um pequeno impacto no desempenho do sistema.
\end{resumo}


\section{Introdução}


Redes de sensores sem fio são utilizadas em diversos cenários, pois consistem de um meio eficiente para obtenção de dados geograficamente distribuídos.
Dentre tais cenários estão ambientes com grande concentração de pessoas, como shoppings, estádios, grandes eventos, etc.
Sendo assim, a sua utilização se mostra interessante no contexto do projeto $(CIA)^2$, que trata da instrumentação de cidades inteligentes.

Nós sensores em redes de sensores sem fio normalmente utilizam fontes de energia limitadas (i.e., baterias).
Logo, a utilização eficiente da energia disponível é crítica neste contexto.
Em nós sensores, o elemento que mais consome energia é o dispositivo de transmissão de dados por rádio frequência.
Dado que um dos principais parâmetros que influenciam na energia consumida pelo transceptor RF é a potência de transmissão, ajustar este valor para o mínimo necessário que viabilize a comunicação passa a ser um problema interessante a ser tratado.

Neste trabalho, discute-se a utilização do controle de potência de transmissão como uma técnica para a redução de consumo de energia em redes de sensores sem fio.
Tal técnica se baseia em heurísticas e meta-heurísticas no controle de potência de transmissão para que os nós da rede, cooperando, consigam economizar energia sem degradar significativamente a qualidade da rede.

\section{Revisão Bibliográfica} \label{revisao}
O estudo sobre controle de potência de transmissão pode ser divido em duas
partes de estudo. A primeira delas é a seleção de potência de transmissão, que é
o método usado para encontrar a potência mínima para transmitir dados entre dois
sensores. Uma pesquisa realizado nessa área foi publicado em 2005 por Correia
\cite{Correia:2005:TPC:1089444.1089494} e estuda um conjunto de algoritmos
usados para seleção de potência de transmissão. A segunda delas é a decisão de
potência de transmissão, que consiste das heurísticas para definir entre quais
sensores devem ser transmitidos os dados. Um estudo utilizado nesse trabalho foi
publicado em 2010 por Sengupta \cite{5089316} e estuda a utilização de teoria
dos jogos para que os nós posam cooperar na decisão de potência de transmissão.

Correia desenvolve e testa quatro algoritmos para a seleção de potência de
transmissão \cite{Correia:2005:TPC:1089444.1089494}. Os algoritmos apresentados
são o interativo, o de atenuação, o AEWMA e o híbrido. O algoritmo interativo se
baseia na interação entre os nós para o ajuste da potência. Os nós decrementam
sua potência até acharem a ideal. Nesse método a potência ideal é dada
quando o nó deixa de receber o ACK. Os principais problemas do desse método são
a flutuação da potência e a perda de pacotes. O algoritmo de atenuação se baseia
em calcular periodicamente o ruído causado pelo meio na transmissão. O ruído é
calculado com base em filtros e a troca informação sobre o impacto do meio é
feita através do cabeçalho da transmissão .O principais problemas do método são a
flutuação da potência e o maior consumo de CPU. O algoritmo AEWMA, atenuação com
filtro EWMA, é muito similar ao de atenuação. Porém, ele considera os estados
anteriores do meio no calculo do ruído. A principal vantagem desse algoritmo
sobre o de atenuação é a menor flutuação na potência. Seu ganho em flutuação se
deve à variação de potência ocorrer de acordo com a variação do meio. O
algoritmo híbrido implementa o filtro usado no algoritmo AEWMA no algoritmo
interativo, isso permite que este algoritmo ajuste sua potência com a informação
dos nós ao seu redor. O algoritmo híbrido se mostrou o mais eficiente dentre os
quatro. He apresenta em seu trabalho \cite{He:2008:TPS:1554126.1554148} uma
abordagem local. Nesse trabalho é descrito um modelo de rede e a partir dele são
desenvolvidos modelos de controle de potência. Em suas heurísticas cada nó
calcula sua potência de transmissão ideal se baseando no modelo de controle
descrito no artigo, e buscando a potência ideal para transmitir um bit com
sucesso.

Li apresenta um protocolo MAC adaptativo para controle de
potênci \cite{4786503}. Nesse texto é apresentado um protocolo MAC, o ATPMAC,
que faz uso do controle adaptativo de potência de transmissão para aumentar a
taxa de transferência na rede. Jung apresenta um protocolo MAC com controle de
potência para redes ad-hoc \cite{Jung:2005:PCM:1160100.1160105}. Esse protocolo,
PCM(Power Control MAC), se baseia em transmitir os pacotes RTS-CTS em potência
máxima e os pacotes DATA-ACK em potência mínima. Um protocolo similar, o BASIC
Protocol, já havia sido apresentado, \cite{Gomez:2003:PSD:942545.942549} porém
esse protocolo apresenta uma deficiência na taxa de transferência. Essa
deficiência foi corrigida implementando negociação entre os nós. Lin desenvolve
o ATPC, um protocolo adaptativo para controle de potência de transmissão
\cite{Lin:2006:AAT:1182807.1182830}. Nesse protocolo cada nó possui um modelo
dos nós ao seu redor. Esse modelo é uma correlação entre a qualidade da
transmissão e a potência usada. O ATPC apresenta características interessantes,
uma vez que podem ser usados como parâmetros tanto a potência quanto a qualidade
de transmissão. Macedo relata em seu artigo a implementação de algoritmos de
roteamento que usufruem de controle de potência de
transmissão\cite{Macedo:2010:TPD:1872426.1872693}. Este trabalho implementa a
utilização de controle de potência no protocolo de DSDV. A principal
contribuição do artigo é mostrar a implementação de controle de potência a nível
de roteamento. Sengupta apresenta em seu artigo um jogo teórico entre sensores
para controle de potência\cite{5089316}. O artigo se baseia em implementar um
jogo entre os sensores com o intuito de selecionar a potência ideal de
transmissão. O jogo implementado é um jogo de informação incompleta e é um jogo
egoísta. Moustafa desenvolve um algoritmo genético com o objetivo de ajustar a
potência ideal de transmissão\cite{1374944}.


\section{Desenvolvimento}

\subsection{O Simulador OMNeT++}
Foi utilizado o simulador OMNeT++ para simulação da rede. O OMNeT++ é um
simulador de redes baseado em eventos discretos e que possui uma série de
frameworks para simular os mais diversos tipos de redes. Utilizou-se o framework
INETManet pois esse permitia a simulação de redes móveis.

O simulador OMNeT++ se baseia em alguns princípios. A rede é descrita usando a
linguagem NED (\textit{Network Description}) e construída na forma de blocos
conectados hierarquicamente. Os algoritmos utilizados pela rede são escritos em
C++ usando as bibliotecas disponibilizadas pelos frameworks. Alguns algoritmos
conhecidos já são encontrados nos frameworks, como por exemplo os de roteamento
clássicos.

\subsection{O Modelo de Energia}

Para desenvolver um algoritmo que busca minimizar o consumo de energia, é
necessário saber como o sistema está gastando energia. Neste caso, é necessário
possuir, no OMNeT++, um componente que simule uma bateria. Apesar do framework
INETManet apresentar um módulo de energia, o \textit{SimpleBat}, esse módulo se
mostrou insuficiente para as necessidades deste projeto pois apresenta
decréscimo de bateria linear o que não simula de forma fidedigna uma bateria.
Assim, portou-se o módulo de energia do framework "PAWiS \textit{project a
simulation framework for Wireless Sensor Networks}" pois ele se apresenta melhor
para a simulação de uma bateria. O modulo do framework PAWiS também se mostra
mais fiel para simular redes de sensores sem fio ao projeto, pois também simula
eventos internos aos nós, e não apenas os eventos da rede.

\subsection{O Modelo de Antenas}

No estudo do simulador OMNeT++ e do framework INETManet constatou-se que eles
possuem uma série de interfaces de rede. Dentre essas, estão os IEEEs 802.11,
802.15.1 (Bluetooth) e 802.15.4. Optou-se por utilizar a interface IEEE 802.15.4
que, embora ainda esteja em fase de ``testes'', já se encontra suficientemente
robusta e usável, além de ser um representante mais realista no contexto de
redes de sensores sem fio.

A implementação do IEEE 802.15.4 do INETManet possui modelos de camadas física e
de MAC. A implementação desses modelos já conta, também, com um módulo de
controle de potência de transmissão. Tornando, assim, fácil a sua utilização.

\subsection{O Método de Seleção de Potência de Transmissão}

A equação de atualização de feromônio no ADHOP funciona da seguinte maneira: cada formiga, baseado na concentração de feromônio nas trilhas, seleciona o nó $v_{j}$ para o próximo salto a partir do nó atual $v_{i}$.
Na verdade, $v_{j}$ é o nó vizinho que possui a maior concentração de feromônio.
No nó $v_{j}$, a formiga a atualiza a concentração de feromônio $\tau _{i,o}$ na entrada $\left ( v_{i},v_{o} \right )$ da tabela de feromônio, onde $v_{o}$ é o nó origem da formiga, utilizando a seguinte equação:
\begin{equation} \tau _{i,o} = \left ( 1 - \varphi \right ) \cdot \tau _{i,o} + \varphi \cdot \tau _{0} \label{adhop_pheromone_increasing} \end{equation}
onde $\varphi \in \left ( 0,1  \right ]$ é o coeficiente de declínio de feromônio e $\tau _{0}$ é o valor da quantidade de depósito inicial de feromônio.
Tal equação permite diversificar o processo de busca ao decrementar a concentração de feromônio nas trilhas enquanto realiza o depósito de feromônio, permitindo que outras formigas tentem outras opções com maior facilidade.
Ela também auxilia e aumenta os efeitos do método de saltos dinâmicos.

A equação de evaporação funciona da seguinte maneira: a evaporação ocorre periodicamente para todos os nós da rede, utilizando a seguinte equação:
\begin{equation} \tau _{i,j} = \left ( 1 - \rho \right ) \cdot \tau _{i,j} , \quad \forall i \in N, \quad \forall j \in Z \label{adhop_evaporation} \end{equation}
onde $\rho \in \left ( 0,1  \right ]$ é o coeficiente de evaporação, $N$ é o conjunto de nós vizinhos e $Z$ é o conjunto de nós que, juntamente com $N$, definem entradas $\left ( v_{i},v_{j} \right )$ na tabela de feromônio.

Logicamente, quanto mais uma rota é utilizada, maior é a concentração de feromônio nela.
O objetivo de tais equações é também possibilitar que o algoritmo beneficie um determinado nó mais do que outros, dado certo momento e situação.
Por exemplo, na visão de um nó $A$, o nó vizinho $B$ possui $90\%$ de carga de bateria enquanto o nó vizinho $C$ possui $75\%$.
Utilizar tais informações como heurísticas possibilitam uma infinidade de possibilidades para aplicar ao roteamento, inclusive no controle de potência de transmissão.
Tal abordagem consiste em aumentar o depósito de feromônio e diminuir a taxa de evaporação quanto maior a carga da bateria do nó vizinho.
Com isso, o nó $B$ seria o escolhido para as próximas transmissões ao invés do nó $C$.

O controle de potência de transmissão é definido pela seguinte equação:
\begin{equation}
W _{A,B} = \left \{ \quad \lfloor \% \left ( \tau _{B} , \tau _{MAX} \right ) \cdot W _{MAX} \rfloor \quad | \quad \left ( \% \left ( \tau _{B} , \tau _{MAX} \right ) \cdot W _{MAX} \right ) \geq W _{MIN} \quad \right \} \label{control_power1}
\end{equation}
onde $W_{A,B}$ é a potência de transmissão de $A$ para $B$,
$\% \left ( \tau_{B} , \tau_{MAX} \right )$ é a percentagem de concentração de feromônio para o nó B dada a concentração saturada de feromônio $\tau_{MAX}$,
$W_{MIN}$ é a potência mínima de transmissão e
$W_{MAX}$ é a potência máxima de transmissão do rádio.

\section{Resultados}

Para obtenção dos resultados foi utilizado o simulador proposto, assim como os modelos de antena e energia.
A Tabela 1 abaixo mostra as configurações utilizadas na simulação da rede sensores sem fio móveis rodando o \emph{Ant-based Dynamic Hop Optimization Protocol} (ADHOP)~\cite{Okazaki:2012}.

\begin{figure}[ht!]
	\begin{center}
	\includegraphics[scale=0.6,width=6cm]{fig/tabela.png}
	\end{center}
	\end{figure}
  
Foram realizadas simulações em vários cenários de rede (com até 200 nós) e os nós foram programados para se comunicar intensamente e se moverem aleatoriamente dentro de uma área de 1200 x 1200 metros.
Conseguimos obter um bom nível de consumo de energia, ao mesmo tempo que obtivemos apenas uma pequena perda no desempenho, mostrando assim a viabilidade da nossa proposta inicial.

   \begin{figure}[htb] % Duas figuras lado a lado
       \begin{minipage}[b]{0.48 \linewidth}
           \fbox{\includegraphics[width=7cm]{fig/SIC_data.png}}\\
           \caption{Taxa de Entrega de Pacotes}
       \end{minipage}\hfill
       \begin{minipage}[b]{0.48 \linewidth}
           \fbox{\includegraphics[width=7cm]{fig/SIC_energy.png}}\\
	\caption{Consumo Médio de Energia}
     \end{minipage}
   \end{figure}
   
   
  
Podemos ver na Figura 1 que a taxa de entrega de pacotes sofreu uma pequena redução em relação a taxa de entrega onde é utilizada a potência de transmissão ao seu nível máximo, apresentando uma queda de 49\% na simulação com poucos nós e uma queda de 27\% no pior caso da rede, onde ela possui maior tráfego de dados e consequentemente mais nós.
Assim, na Figura 2 temos a energia média consumida e percebemos uma redução na faixa de 9\% a 48\% quando utilizado o método de seleção de potência proposto no experimento, obtendo uma redução 32\% quando a rede possuía 200 nós e maior tráfego de dados. 

\subsection{Conclusões}
Neste relatório foi apresentado um método para fazer a seleção de potência de transmissão através do roteamento baseado em colônia de formigas, ADHOP, onde é  utilizada a concentração de feromônio como forma de seleção de rota e utilizada a carga de bateria como métrica para a heurística de balanceamento de energia do protocolo, controlando assim a potência de transmissão. 
Foi utilizado o OMNeT++ para a simulação do mesmo, foi portado ao OMNeT++ o módulo de energia do framework "PAWiS project a simulation framework for Wireless Sensor Networks" pois ele se apresenta melhor para a simulação de uma bateria. Dentre as interfaces de rede disponíveis no OMNeT++ foi selecionada a consolidada implementação do protocolo IEEE 802.15.4. 
Os resultados obtidos mostram o impacto positivo em realizar a seleção da potência de transmissão utilizando o ADHOP, com tal abordagem conseguimos obter um ótimo consumo de energia ao mesmo tempo que a taxa de entrega de pacotes permaneceu em um bom nível.


\bibliographystyle{abbrv}
\bibliography{sbc-template}

\end{document}
