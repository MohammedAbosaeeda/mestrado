\note{Exemplo mais complexo. Modos diferenciados são utilizados.
Aplicação real.}
blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá
blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá
blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá
blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá
blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá

\note{Comportamento da aplicação.}
blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá
blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá
blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá
blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá
blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá

\note{Análise dos resultados.}
blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá
blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá
blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá
blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá
blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá blá


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \section{Case Study: Wireless Gateway for Sensor Networks\label{sec:gateway}}

% Explain the example.
% \fig{gateway_app}{Gateway application structure}{.8}
% A gateway for use in remote wireless sensor networks was developed
% to allow long distance transmission of sensing data. The development
% of this prototype was motivated by the need for centralization of
% data when monitoring electric power transmission lines. Due to the
% large amount of power such lines must transmit, it is usual to make
% this transmission in high voltage, which decreases the current, and
% to use oil-pressurized cables to dissipate the over-heating of
% conductor material (cables). Furthermore, to drive preventive
% maintenance in such cables, it is desirable to constantly monitor
% temperature and pressure for the oil in which it is embedded.

% Describe the hardware.
% This gateway was implemented by adapting a \textsc{Siemens MC35iT
%   Gsm/Gprs}~\cite{MC35iT:2006} terminal on a \textsc{Berkley Mote2}
% sensing platform~\cite{Hill:2000}. Figure~\ref{fig:gateway} shows a
% block diagram for the original project. A set of solar panels will
% be used to charge a lithium ion battery which will be responsible
% for providing the system with energy. In what concerns the gateway
% functionality, the sensing platform is basically comprised by an
% \textsc{Atmel ATMega128} microcontroller~\cite{ATMega128:2004}, a
% \textsc{Cc1000} radio transceiver~\cite{cc1000:2004} and an
% expansion module which allows the externalization of one of the
% processor's serial ports (\textsc{Usart}) by which the
% \textsc{MC35iT} terminal is accessed. This \textsc{Gsm/Gprs}
% terminal is an off-the-shelf soution from \textsc{Siemens} which
% allows easy integration with most systems and works by accepting
% \textsc{At} commands via the serial interface. For this case study,
% the power source for the system still being a set of ordinary
% batteries, and the energy consumption measurements showed below
% reflects only the consumption for the components inside the darker
% square in Figure~\ref{fig:gateway}.

% \fig{gateway}{Wireless Gateway for Sensor Networks block
%   diagram.}{.9}

% Describe application.  
% The application running in this gateway is
% shown in Figure~\ref{prg:gateway_app.cc}. Its function is to relay
% messages between the sensing platforms and the monitoring center. In
% order to do it, it uses three system components:
% \texttt{Communicator}, \texttt{GSM\_Modem} and \texttt{RTC}.
% \textsc{Epos} is configured to bind the \texttt{Communicator}
% component with the \textsc{Cc1000} radio transceiver present in the
% \textsc{Mica2} platform; to bind the \texttt{GSM\_Modem} component
% with the \textsc{Siemens MC35iT Gsm/Gprs} terminal; and to ensure
% that the \texttt{RTC} component will provide a sequential
% timestamp\footnote{The \texttt{RTC} was implemented using one of the
%   microcontroller's timers. Altough this solution haven't shown a
%   good precision, it is well suited for the application once the
%   purpose of using the \texttt{RTC} is to provide a sequential and
%   unique value during a certain period of time.}. When the
% application starts, all used components are initialized by their
% constructors and the main routine creates a buffer where messages
% may be prepared to be sent to the monitoring center.

%\prg{C++}{gateway_app.cc}{The Wireless Gateway application}

% Energy consumption results analysis.
%\textsc{Ho Ho Ho}

