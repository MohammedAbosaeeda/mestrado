\subsubsection{Em Tempo de Execução}
\label{sc:proposta:proposta:execucao}

%- Proposta para a estimativa do tempo restante de duração da bateria. Utilizo uma técnica para estimar o tempo restante da bateria. Estimativa do tempo restante na figura~\ref{fig:energiaTempoRestante}.

Com objetivo de prover \qos{} em termos de energia é necessário verificar
periodicamente, em tempo de execução, se o
tempo de duração do sistema requerido pela aplicação $T_t$ pode ser alcançado.
Para isso, $T_t$ é atualizado pelo tempo decorrido, e depois, é comparado 
com a estimativa do tempo de duração do sistema,
$T_{\alpha \kappa}$, no instante $\kappa$ . $T_{\alpha \kappa}$ é obtido atravésdo cálculo da carga da bateria, $E_{\alpha \kappa}$, no instante $\kappa$ e 
da estimativa do consumo de energia necessária para as tarefas futuras.
As plataformas dos sistemas embarcados, normalmente, provem mecanismos para
obter $E_{\alpha \kappa}$ .

Para a estimativa do consumo de energia futuro das tarefas é utilizado a análise
da velocidade média de descarga da bateria. Isso corresponde ao cálculo da média
das energias consumidas, $E_{\lambda \kappa}$, em determinados intervalos de 
tempo, ou seja, 

\[ E_{\lambda \kappa} = \frac{E_{\lambda \kappa-1} + \left (
E_{\alpha \kappa} - E_{\alpha \kappa-1} \right ) }{2} \]



, e o cálculo da média desses intervalos, $T_{\lambda \kappa}$ é obtida

\[ T_{\lambda \kappa} = \frac{T_{\lambda \kappa-1} + \left (
T_\kappa - T_{\kappa-1} \right ) }{2} \]


Dessa forma, obtemos $T_{\alpha \kappa}$ através da equação

\[ T_{\alpha \kappa} = \left ( \frac{E_{\alpha \kappa}}{E_{\lambda \kappa}}
\right ) * T_{\lambda \kappa} \]

Existe energia suficiente para atender o tempo de duração do sistema 
especificado pelo usuário caso $T_t \le T_{\alpha \kappa}$. Caso contrário, as
partes opcionais serão descartadas e nesse tempo ocioso, um gerente do consumo
de energia será chamdado.



